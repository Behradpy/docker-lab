services:
  backend:
    environment:
      NODE_ENV: development
    command: npm run dev
    volumes:
      - ./backend:/app
      - /app/node_modules
    ports:
      - "${BACKEND_PORT:-5000}:${BACKEND_PORT:-5000}"

  frontend:
    environment:
      NODE_ENV: development
      # If your frontend needs to call backend directly in dev:
      VITE_API_URL: "http://localhost:${NGINX_PORT:-80}/api"
    command: npm run dev -- --host 0.0.0.0 --port ${FRONTEND_PORT:-3000}
    volumes:
      - ./frontend:/app
      - /app/node_modules
    ports:
      - "${FRONTEND_PORT:-3000}:${FRONTEND_PORT:-3000}"

  nginx:
    # In dev you can keep nginx, or drop it and hit FE/BE directly.
    # Keeping it helps match prod routing early.
    ports:
      - "${NGINX_PORT:-80}:80"

